<form id="form" action="" method="post">
   <input type="hidden" id="_method" name="_method" value="post">

   <!-- Wbs data -->
   <div class="d-flex d-flex-row">
      <div class="css-flex-8">
         <label for="id" class="form-label">Wbs</label>
         <input type="number" class="form-control" id="id" value="{{data.id}}" readonly>
      </div>
      <div class="css-flex-20 ms-2">
         <label for="internal_ref" class="form-label">Rif. interno</label>
         <input type="text" class="form-control" id="internal_ref" name="internal_ref" value="{{data.internal_ref}}"
                readonly>
      </div>
      <div class="css-flex-70 ms-2">
         <label for="customer" class="form-label">
            Cliente
            <a href="/customer/{{data.customer_id}}" class="css-disabled-link"><i
                  class="bi bi-arrow-right-short"></i></a>
         </label>
         <select class="form-select" id="customer" name="customer">
            {{#each data.customer_list}}
               <option value="{{id}}" {{#eq id ../data.customer_id}}selected{{/eq}}>{{description}}</option>
            {{/each}}
         </select>
      </div>
   </div>
   <div class="d-flex d-flex-row mt-1">
      <div class="css-flex-50">
         <label for="description1" class="form-label">Descrizione 1</label>
         <input type="text" class="form-control" id="description1" name="description1" value="{{data.description1}}"
                maxlength="80">
      </div>
      <div class="css-flex-50 ms-2">
         <label for="description2" class="form-label">Descrizione 2</label>
         <input type="text" class="form-control" id="description2" name="description2" value="{{data.description2}}"
                maxlength="80">
      </div>
   </div>

   <!-- Save change & Delete wbs & Cancel operation -->
   <div class="d-flex d-inline-row justify-content-center mt-2">
      <button type="submit" class="btn btn-success me-1">
         <i class="bi bi-floppy"></i>
      </button>
      {{#unless data.activity}}
         <button type="button" class="btn btn-danger me-1" onclick="deleteObject({{data.id}});">
            <i class="bi bi-trash"></i>
         </button>
      {{/unless}}
      <a href="/wbs" type="button" class="d-inline-flex btn btn-secondary">
         <i class="bi bi-x-square"></i>
      </a>
   </div>

   <!-- List of Activity -->
   <h6>Attivit√†</h6>
   <ul class="list-group p-2 css-font-size-95">
      {{#each data.activity}}
         <a href="/activity/{{id}}" class="list-group-item list-group-item-action css-listgroup-item">
            <div class="d-flex flex-row align-items-center">
               <div class="css-flex-95">
                  <span>{{description}}</span><br>
                  <span class="css-summarize fst-italic">{{internal_ref}} | {{external_ref}}</span>
               </div>
            </div>
         </a>
      {{/each}}
   </ul>
   {{> YesOrNo}}
   {{> Error}}
</form>

<script>
   function modalSubmit() {
      document.querySelector("#form").submit();
   }
   function deleteObject(id) {
      document.querySelector("#_method").value = "delete";
      let modal = new bootstrap.Modal("#YesOrNo");
      modal.show();
   }
</script>